<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn.educationisttutoring.org/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn.educationisttutoring.org/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://cdn.educationisttutoring.org/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="https://cdn.educationisttutoring.org/images/favicons/site.webmanifest">
    <style>
        .header {
            background-color: rgb(56, 177, 138);
            margin-right: auto;
            margin-left: auto;
            padding-left: 30px;
            padding-right: 30px;
        }
        .navigation-bar {
            margin-right: auto;
            margin-left: auto;
            height: 90px;
            max-width: 1170px;
        }
        .logo-image {
            padding-top: 10px;
            height: 70px;
        }
        .navigation-items {
            padding-top: 35px;
            padding-bottom: 35px;
            padding-left: 20px;
            padding-right: 20px;
            display: inline;
            float: left;
        }
    </style>
</head>
<body style="margin: 0;">
    <div class="header">
        <nav class="navigation-bar">
            <img class="logo-image" src="https://cdn.educationisttutoring.org/images/light-logos/educationist.png">
            <ul style="margin: 0; float: right;">
                <li class="navigation-items"><a onclick="logout()" href="default.asp">Home</a></li>
                <li class="navigation-items"><a href="news.asp">News</a></li>
                <li class="navigation-items"><a href="contact.asp">Contact</a></li>
                <li class="navigation-items"><button onclick="logout()">Log Out</a></li>
            </div>
        </nav>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    
    <script>
        var firebaseConfig = {
        apiKey: "AIzaSyDf83xltbEW7NoN1PezsCgmtTQesxknfbM",
        authDomain: "educationist-42b45.firebaseapp.com",
        databaseURL: "https://educationist-42b45-default-rtdb.firebaseio.com",
        projectId: "educationist-42b45",
        storageBucket: "educationist-42b45.appspot.com",
        messagingSenderId: "842761677930",
        appId: "1:842761677930:web:a4c21f30788d79cc7cae13",
        measurementId: "G-MQ60CQZ0TH"
        };
        firebase.initializeApp(firebaseConfig);
        firebase.auth().onAuthStateChanged((user) => {
            if (user) {
                var uid = user.uid;
            } else {
                const queryString = window.location.search;
                const urlParams = new URLSearchParams(queryString);
                const token = urlParams.get('token')
                if (token) {
                    firebase.auth().signInWithCustomToken(token)
                    .then((userCredential) => {
                        var user = userCredential.user;
                        window.location.replace("https://webapp-red.vercel.app/")
                    })
                    .catch((error) => {
                        var errorCode = error.code;
                        var errorMessage = error.message;
                    });
                } else {
                    window.location.replace("https://educationisttutoring.org/webapp/logout")
                }
            }
        });
        function logout() {
            firebase.auth().signOut().then(() => {
                console.log("Logged out successfully")
            }).catch((error) => {
                console.log(error)
            });
        }
    </script>
</body>
</html>
