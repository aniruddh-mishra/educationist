<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Educationist Tutoring</title>
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn.educationisttutoring.org/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn.educationisttutoring.org/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://cdn.educationisttutoring.org/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="https://cdn.educationisttutoring.org/images/favicons/site.webmanifest">
    <style>
        .header {
            background-color: rgb(56, 177, 138);
            margin-right: auto;
            margin-left: auto;
            padding-left: 30px;
            padding-right: 30px;
        }
        .navigation-bar {
            margin-right: auto;
            margin-left: auto;
            height: 90px;
            max-width: 1170px;
        }
        .logo-image {
            padding-top: 10px;
            height: 70px;
        }
        .navigation-items {
            padding-top: 35px;
            padding-bottom: 35px;
            padding-left: 20px;
            padding-right: 20px;
            display: inline;
            float: left;
        }
        button {
            background: none;
            border: none;
            padding: 0;
            margin: 0;
            cursor: pointer;
        }
        .navigation-link {
            font-size: 14px;
            font-weight: 600;
            font-family: 'Libre Franklin', sans-serif;
            color: white;
            text-decoration: none;
        }
        .navigation-link:hover {
            text-decoration: underline;
        }
        .navigation-link:active {
            text-decoration: underline;
        }
    </style>
</head>
<body style="margin: 0;">
    <div class="header">
        <nav class="navigation-bar">
            <img class="logo-image" src="https://cdn.educationisttutoring.org/images/light-logos/educationist.png">
            <ul style="margin: 0; float: right;">
                <li class="navigation-items"><a class="navigation-link" onclick="logout()" href="/">Home</a></li>
                <li class="navigation-items"><a class="navigation-link" href="/">News</a></li>
                <li class="navigation-items"><a class="navigation-link" href="contact.asp">Contact</a></li>
                <li class="navigation-items"><button class="navigation-link" onclick="logout()">Log Out</a></li>
            </div>
        </nav>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    
    <script>
        function getCookie(cname) {
            let name = cname + "=";
            let decodedCookie = decodeURIComponent(document.cookie);
            let ca = decodedCookie.split(';');
            for(let i = 0; i <ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') {
                c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                return c.substring(name.length, c.length);
                }
            }
        return "";
        }
        var firebaseConfig = {
        apiKey: "AIzaSyDf83xltbEW7NoN1PezsCgmtTQesxknfbM",
        authDomain: "educationist-42b45.firebaseapp.com",
        databaseURL: "https://educationist-42b45-default-rtdb.firebaseio.com",
        projectId: "educationist-42b45",
        storageBucket: "educationist-42b45.appspot.com",
        messagingSenderId: "842761677930",
        appId: "1:842761677930:web:a4c21f30788d79cc7cae13",
        measurementId: "G-MQ60CQZ0TH"
        };
        firebase.initializeApp(firebaseConfig);
        firebase.auth().onAuthStateChanged((user) => {
            if (user) {
                var uid = user.uid;
                alert("This website is still in development. To switch back to the main educationist website, please log out. Thank you for your time, and we can't wait to see what you do during your time with Educationist!");
            } else {
                console.log(document.cookie);
                var token = getCookie('token');
                document.cookie = "token=;expires=Thu, 01 Jan 1970 00:00:00 UTC;";
                if (token != "") {
                    firebase.auth().signInWithCustomToken(token)
                    .then((userCredential) => {
                        var user = userCredential.user;
                        window.location.replace("https://app.educationisttutoring.org")
                    })
                    .catch((error) => {
                        var errorCode = error.code;
                        var errorMessage = error.message;
                        alert("There has been an error. Please contact Educationist for more assitance or try again later.");
                    });
                    var myDate = new Date()
                    myDate.setMinutes(myDate.getMinutes())
                    document.cookie = "token=" + token + ";expires=" + myDate + ";path=/;";
                }
                window.location.replace("https://educationisttutoring.org/webapp/logout")
            }
        });
        function logout() {
            firebase.auth().signOut().then(() => {
                console.log("Logged out successfully")
            }).catch((error) => {
                console.log(error)
            });
        }
    </script>
</body>
</html>
